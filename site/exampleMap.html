<html>
<head>
</head>
<body>
	<div>
	    Radius: <input type="number" id="inptRadius" min="2" max="100" value="20"/>
	    Intensity: <input type="number" id="inptIntensity" min="0" value="0" />
	    <button id="inptButton" onclick="setTimeout(updateRadiusIntensity,0)">Change</button>
	</div>
	<div id='map1' style='width:100%; height:800px; overflow:auto; border:solid 1px black;'></div>

	<script type="text/javascript">
	    /* jshint esversion: 6 */
	    function updateRadiusIntensity() {
	        document.getElementById('inptButton').disabled = true;
	        map1.changeRadiusAndIntensity(document.getElementById('inptRadius').value,document.getElementById('inptIntensity').value);
	        setTimeout(()=>{document.getElementById('inptButton').disabled = false;},1000);
	    }
	</script>
	<script type='text/javascript' src='map.js'></script>
	<script type='text/javascript'>
		if(!document.getElementById('gmapiScript')) {
			var ele = document.createElement('script');
			ele.setAttribute('id','gmapiScript');
			ele.setAttribute('type','text/javascript');
			ele.setAttribute('async', '');
			ele.setAttribute('defer', '');
			ele.setAttribute('src', 'https://maps.googleapis.com/maps/api/js?key=AIzaSyD5Gv9ylAtrLqDKbKUnM-_AFencmFgyQ_E&libraries=visualization&callback=initMap1');
			document.getElementsByTagName('head')[0].appendChild(ele);
		} else {
			initMap1();
		}
	</script>


	<div id="tmpScripts"></div>
	<button onclick="testOnClick()">Click !!</button>
	<script type="text/javascript">
	function testOnClick() {
		// Create a script, execute-it, and delete-it !
		let newScriptName = "sc"+(Math.random()*10000)|0;
		let papa = document.getElementById('tmpScripts');

		let newScript = `
		map1.rmAllPoints();
		map1.addPoint(46.35, 2.8, 0.9);
		map1.addPoint(46.36, 2.7, 1);
		map1.addPoint(46.37, 2.6, 1.1);
		map1.addPoint(46.38, 2.5, 1.2);
		map1.centerAndZoom();

		document.getElementById('tmpScripts').removeChild(document.getElementById('` + newScriptName + "'));";

		var ele = document.createElement('script');
        ele.setAttribute("id",newScriptName);
        ele.setAttribute("type","text/javascript");
        ele.innerHTML=newScript;
        papa.appendChild(ele);
	}
	</script>

</body>
</html>
